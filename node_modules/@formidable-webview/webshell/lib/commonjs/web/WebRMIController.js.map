{"version":3,"sources":["WebRMIController.ts"],"names":["javaScript","snippets","args","reduce","buffer","currentSnippet","index","push","JSON","stringify","join","WebRMIController","webViewRef","reporter","current","injectJavaScript","dispatchError"],"mappings":";;;;;;;;;;;;;;;AAGA,SAASA,UAAT,CAAoBC,QAApB,EAAoE;AAAA,oCAAbC,IAAa;AAAbA,IAAAA,IAAa;AAAA;;AAClE,SAAOD,QAAQ,CACZE,MADI,CACG,UAACC,MAAD,EAASC,cAAT,EAAyBC,KAAzB,EAAmC;AACzCF,IAAAA,MAAM,CAACG,IAAP,CAAYF,cAAZ,EAA4BG,IAAI,CAACC,SAAL,CAAeP,IAAI,CAACI,KAAD,CAAnB,KAA+B,EAA3D;AACA,WAAOF,MAAP;AACD,GAJI,EAIF,EAJE,EAKJM,IALI,CAKC,EALD,CAAP;AAMD;;IAEYC,gB;AAKX,4BAAYC,UAAZ,EAAwCC,QAAxC,EAA4D;AAAA;;AAAA;;AAAA;;AAC1D,SAAKD,UAAL,GAAkBA,UAAlB;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACD;;;;qCAE0BZ,Q,EAAgD;AAAA;;AACzE,UAAI,KAAKW,UAAL,CAAgBE,OAAhB,IAA2B,CAAC,KAAKF,UAAL,CAAgBE,OAAhB,CAAwBC,gBAAxD,EAA0E;AACxE,aAAKF,QAAL,CAAcG,aAAd,CAA4B,8BAA5B;AACA;AACD;;AAJwE,yCAAbd,IAAa;AAAbA,QAAAA,IAAa;AAAA;;AAKzE,oCAAKU,UAAL,CAAgBE,OAAhB,gFAAyBC,gBAAzB,CAA0Cf,UAAU,MAAV,UAAWC,QAAX,SAAwBC,IAAxB,EAA1C;AACD","sourcesContent":["import { RefObject } from 'react';\nimport Reporter from '../Reporter';\n\nfunction javaScript(snippets: TemplateStringsArray, ...args: any[]) {\n  return snippets\n    .reduce((buffer, currentSnippet, index) => {\n      buffer.push(currentSnippet, JSON.stringify(args[index]) || '');\n      return buffer;\n    }, [] as string[])\n    .join('');\n}\n\nexport class WebRMIController {\n  private webViewRef: RefObject<{\n    injectJavaScript: (js: string) => void;\n  }>;\n  protected reporter: Reporter;\n  constructor(webViewRef: RefObject<any>, reporter: Reporter) {\n    this.webViewRef = webViewRef;\n    this.reporter = reporter;\n  }\n\n  protected injectJavaScript(snippets: TemplateStringsArray, ...args: any[]) {\n    if (this.webViewRef.current && !this.webViewRef.current.injectJavaScript) {\n      this.reporter.dispatchError('WEBSH_WEBVIEW_MISSING_MEMBER');\n      return;\n    }\n    this.webViewRef.current?.injectJavaScript(javaScript(snippets, ...args));\n  }\n}\n"]}